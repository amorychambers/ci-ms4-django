{% extends 'base.html' %}
{% load static %}
{% load ratings %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'star-ratings/css/star-ratings.css' %}">
{% endblock %}

{% block extra_js %}
<script type="text/javascript" src="{% static 'star-ratings/js/dist/star-ratings.min.js' %}"></script>
{% endblock %}

{% block content %}

  <h2 class="heading my-2"><a href="{% url 'products' %}" class="heading">All Products</a></h2>
  <div class="row my-md-5 mx-lg-4">
    <div class="col-12 col-md-6 my-2">
      <img src="/media/{{ product.image }}" class="w-100" alt="Product Image">
    </div>
    <div class="col-12 col-md-6 background">
      <h2 class="my-2">{{ product.name }}</h2>
      {% if product.sale %}
      <p><strike>£{{ product.price }}</strike><span class="text-danger ps-2">£{{ product.get_sale_price }} - Sale!</span></p>
      {% else %}
      <p>£{{ product.price }}{% if 'coffee' in product.tags %} per 250g{% endif %}</p>
      {% endif %}
      {% ratings product read_only=True icon_height=16 icon_width=16 %}
      <p>{{ product.description }}</p>
      <form action="{% url 'add_to_cart' product.id %}" method="POST">
        {% csrf_token %}
        <div class="form-row my-2">

          <div class="col-12">
            <label for="id_qty_{{ product_id }}">Quantity:</label>
            <input type="number" class="form-control" name="quantity" value="1" min="1" max="{{ max_qty }}" data-item_id="{{ product.id }}" id="id_qty_{{ product.id }}">
          </div>

          <div class="col-12 my-2">
            <input type="submit" class="btn submit-button my-2" value="Add to Cart">
            <h5 class="heading my-4 no-bg"><a href="{% url 'products' %}">Back to All Products</a></h5>
          </div>

          <input type="hidden" name="redirect_url" value="{{ request.path }}">
        </div>
      </form>
    </div>
  </div>


{% endblock %}